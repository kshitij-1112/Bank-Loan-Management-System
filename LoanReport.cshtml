@model List<BankLoanProject.Models.LoanReportViewModel> 
@{ 
    var role = Context.Session.GetString("Role"); 
    Layout = null; 
} 

<div class="container mt-4 p-4 bg-light rounded shadow"> 
    <h2 class="text-center text-black">Loan Report</h2> 
 
    <!-- Button Group (Export & Filter) --> 
    <div class="d-flex justify-content-between mb-4"> 
        <button class="btn btn-secondary" id="btnExport"> 
            <i class="fas fa-file-export"></i> Export 
        </button> 
 
        <!-- Filter Dropdown --> 
        <div class="dropdown"> 
            <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"> 
                <i class="fas fa-filter"></i> Filter 
            </button> 
            <div class="dropdown-menu p-3"> 
                <label class="fw-bold">By Loan Type:</label> 
                <select id="loanTypeFilter" class="form-control mb-2"> 
                    <option value="">All</option> 
                    <option value="Home">Home</option> 
                    <option value="Vehicle">Vehicle</option> 
                    <option value="Personal">Personal</option> 
                </select> 
 
                <label class="fw-bold">By Application Date:</label> 
                <input type="date" id="applicationDateFilter" class="form-control mb-2"> 
 
                <label class="fw-bold">By Status:</label> 
                <select id="statusFilter" class="form-control mb-2"> 
                    <option value="">All</option> 
                    <option value="Approved">Approved</option> 
                    <option value="Pending">Pending</option> 
                </select> 
 
                <button class="btn btn-success mt-2 w-100" id="btnApplyFilter">Apply</button> 
                <button class="btn btn-danger mt-2 w-100" id="btnClearFilter">Clear</button> 
            </div> 
        </div> 
    </div> 
 
    <!-- Loan Report Table --> 
    <div class="table-responsive"> 
        <table class="table table-bordered table-hover table-striped shadow-sm" id="loanReportTable"> 
            <thead class="table-primary"> 
                <tr> 
                    @if (role == "Admin") 
                    { 
                        <th>Customer ID</th> 
                        <th>Customer Name</th> 
                    } 
                    <th>Product Type</th> 
                    <th>Product Name</th> 
                    <th>Loan Amount</th> 
                    <th>Application Date</th> 
                    <th>Status</th> 
                </tr> 
            </thead> 
            <tbody> 
                @foreach (var report in Model) 
                { 
                    <tr> 
                        @if(role=="Admin"){ 
                        <td>@report.CustomerId</td> 
                        <td>@report.CustomerName</td> 
                        } 
                        <td>@report.ProductType</td> 
                        <td>@report.ProductName</td> 
                        <td>@report.LoanAmount.ToString("C")</td> 
                        <td>@report.ApplicationDate.ToString("dd-MM-yyyy")</td> 
                        <td class="fw-bold @(report.ApprovalStatus == "Approved" ? "text-success" : "text-danger")">@report.ApprovalStatus</td> 
                    </tr> 
                } 
            </tbody> 
        </table> 
    </div>
    
    <!-- Add pagination if needed -->
    @if (Model.Count > 10)
    {
        <nav aria-label="Page navigation" class="mt-4">
            <ul class="pagination">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
    }
</div>
