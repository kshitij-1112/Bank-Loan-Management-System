success: function (response) {
    try {
        const json = JSON.parse(response);
        if (json.success) {
            $('#updateLoanModal').modal('hide');
            const currentType = localStorage.getItem('activeLoanType') || 'personal';
            localStorage.setItem('activeLoanType', currentType);
            location.reload();
            return;
        }
    } catch (e) {
        // Instead of replacing entire modal, just replace the form inside it
        const newForm = $(response).find('#updateLoanForm');
        $('#updateLoanForm').replaceWith(newForm);

        // Re-parse validation
        $.validator.unobtrusive.parse('#updateLoanForm');
    }

    submitBtn.html(originalText);
    submitBtn.prop('disabled', false);
}



